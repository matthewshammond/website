<!DOCTYPE html>
<html lang="en">

<head><script src="/livereload.js?mindelay=10&amp;v=2&amp;port=1313&amp;path=livereload" data-no-instant defer></script>
<meta charset="utf-8" />
<title>Matt Hammond Inc | Mac Snippets</title>
<meta name="viewport" content="width=device-width,initial-scale=1.0" />
<link
  rel="apple-touch-icon"
  sizes="180x180"
  href="https://matthammond.com/favicon/apple-touch-icon.png"
/>
<link
  rel="icon"
  type="image/png"
  sizes="32x32"
  href="https://matthammond.com/favicon/favicon-32x32.png"
/>
<link
  rel="icon"
  type="image/png"
  sizes="16x16"
  href="https://matthammond.com/favicon/favicon-16x16.png"
/>
<link rel="manifest" href="https://matthammond.com/favicon/site.webmanifest" />
<link
  rel="mask-icon"
  href="https://matthammond.com/favicon/safari-pinned-tab.svg"
  color="#5bbad5"
/>
<link rel="shortcut icon" href="https://matthammond.com/favicon/favicon.ico" />
<meta name="msapplication-TileColor" content="#da532c" />
<meta
  name="msapplication-config"
  content="https://matthammond.com/favicon/browserconfig.xml"
/>
<meta name="theme-color" content="#ffffff" />

<link
  href='/css/fa6.min.css'
  rel="stylesheet"
  type="text/css"
/>
  
<link rel="stylesheet" href="/css/style.css" />
 
<link
  href='/css/style.min.css'
  rel="stylesheet"
  type="text/css"
/>
<link rel="stylesheet" href='/css/custom.css' />

<meta
  property="og:title"
  content="Matt Hammond Inc | Mac Snippets"
/>



<meta name="description" content="Collection of random terminal snippets for macOS." />
<meta property="og:title" content=" | " />
<meta property="og:site_name" content="Matt Hammond Inc" />
<meta property="og:description" content="Collection of random terminal snippets for macOS." />
<meta property="og:url" content="http://localhost:1313/articles/2023/mac-snippets/" />
<meta property="og:type" content="website" />
<meta property="og:locale" content="" />

<link rel="canonical" href="http://localhost:1313/articles/2023/mac-snippets/" />

<meta property="article:published_time" content="2023-01-11T00:00:00&#43;00:00" />
<meta property="article:updated_time" content="2023-01-11T00:00:00&#43;00:00" />







    
<meta property="og:image" content="http://localhost:1313/images/tux_apple.png">
    


<meta name="twitter:title" content="Mac Snippets" />
<link
  rel="preload"
  href='/css/sweetalert2.min.css'
  as="style"
  onload="this.onload=null;this.rel='stylesheet'"
/>

</head>

<body class="flex flex-col min-h-screen bg-nord-6">
  <main class="flex-grow"><header>
  <div id="overlay">
    <ul class="text-center list-none text-white text-3xl">
      
      <li class="p-2">
        <a href="/services/">
          <span>Services</span>
        </a>
      </li>
      
      <li class="p-2">
        <a href="/articles/">
          <span>Articles</span>
        </a>
      </li>
      
      <li class="p-2">
        <a href="/about/">
          <span>About</span>
        </a>
      </li>
      
      <li class="p-2">
        <a href="/contact/">
          <span>Contact</span>
        </a>
      </li>
      
    </ul>
  </div>
  <nav class="flex items-center justify-between flex-wrap bg-nord-0 p-8">
    <div class="flex items-center flex-shrink-0 text-xl text-nord-0 mr-6">
      <a href="http://localhost:1313/"
        ><img
          alt="Matt Hammond Inc"
          class="h-16 mr-3"
          src="/img/logos/logo.png"
      /></a>
    </div>
    <script src="https://unpkg.com/vanilla-back-to-top@7.2.1/dist/vanilla-back-to-top.min.js"></script>
    <script>
      addBackToTop({
        diameter: 52,
        backgroundColor: "#3B4252",
        textColor: "#ECEFF4",
      });
    </script>
    <div
      class="hidden w-full block flex-grow lg:flex lg:items-center lg:w-auto"
      id="mobileMenu"
    >
      <div class="text-lg lg:flex-grow"></div>
      <div class="text-lg">
        
        <a
          href="/services/"
          class="duration-200 block mt-4 lg:inline-block lg:mt-0 text-nord-6 hover:opacity-60 mr-8"
        >
          Services
        </a>
        
        <a
          href="/articles/"
          class="duration-200 block mt-4 lg:inline-block lg:mt-0 text-nord-6 hover:opacity-60 mr-8"
        >
          Articles
        </a>
        
        <a
          href="/about/"
          class="duration-200 block mt-4 lg:inline-block lg:mt-0 text-nord-6 hover:opacity-60 mr-8"
        >
          About
        </a>
        
        <a
          href="/contact/"
          class="duration-200 block mt-4 lg:inline-block lg:mt-0 text-nord-6 hover:opacity-60 mr-8"
        >
          Contact
        </a>
        
      </div>
    </div>
  </nav>
</header>

<div class="mx-auto my-10 max-w-6xl">
  <div class="mx-3 col-span-3 lg:col-span-2 px-2">
    <h1 class="title text-5xl font-bold mb-3">Mac Snippets</h1>
    <section class="mb-4 text-lg">
      <h4 id="date" class="flex flex-row items-center">
        <span class="icon-access_time text-2xl mr-2"></span> January 11, 2023
      </h4>
      
      <h4 class="flex flex-row items-center">
        <span class="icon-person text-2xl mr-2"></span>Matt Hammond
      </h4>
       
    </section>
    <div
      class="content prose md:prose-lg lg:prose-xl max-w-none py-1 text-nord-0"
    >
      <h2 id="code-snippets">Code Snippets</h2>
<ul>
<li>remove duplicates from $PATH</li>
</ul>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl"><span class="nb">typeset</span> -U PATH
</span></span></code></pre></div><ul>
<li>link airport</li>
</ul>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl">sudo ln -s /System/Library/PrivateFrameworks/Apple80211.framework/Versions/Current/Resources/airport /usr/local/bin/airport
</span></span></code></pre></div><ul>
<li>partition USB</li>
</ul>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl">sudo diskutil partitionDisk /dev/disk2 <span class="m">4</span> GPT ExFAT Tails 32G APFS Keys 10M ExFAT Drive 1G ExFAT Go<span class="se">\ </span>Drive R
</span></span><span class="line"><span class="cl">sudo diskutil apfs encryptVolume disk3s1 -user disk
</span></span></code></pre></div><ul>
<li>format USB</li>
</ul>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl">diskutil erasedisk ExFAT GoDrive disk2 <span class="c1">#format for Linux only</span>
</span></span><span class="line"><span class="cl">diskutil erasedisk MS-DOS GODRIVE disk2 <span class="c1">#format for Mac/Linux</span>
</span></span></code></pre></div><ul>
<li>write image to usb</li>
</ul>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl">sudo gdd <span class="k">if</span><span class="o">=</span>~/Downloads/debian.iso <span class="nv">of</span><span class="o">=</span>/dev/disk2 <span class="nv">status</span><span class="o">=</span>progress <span class="nv">bs</span><span class="o">=</span>4M
</span></span></code></pre></div><ul>
<li>unload macfuse kernel</li>
</ul>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl">sudo kextunload -b io.macfuse.filesystems.macfuse
</span></span></code></pre></div><h2 id="password-snippets">Password Snippets</h2>
<p>Storing and retrieving passwords in bash scripts from the macOS keychain
#password</p>
<ul>
<li>Allow access to macOS keychain (use only if creating keychains remote)</li>
</ul>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl">security -i unlock-keychain
</span></span></code></pre></div><ul>
<li>Set up password in macOS keychain
<ul>
<li>-T = immediately grant access without GUI confirmation</li>
</ul>
</li>
</ul>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl">security add-generic-password -T /usr/bin/security -s <span class="s2">&#34;Keychain item name here&#34;</span> -a <span class="s2">&#34;username here&#34;</span> -w
</span></span></code></pre></div><ul>
<li>Retrieve the password in a script like this:</li>
</ul>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl"><span class="nv">PASSWORD</span><span class="o">=</span><span class="k">$(</span>security find-generic-password -s <span class="s2">&#34;Keychain item name here&#34;</span> -a <span class="s2">&#34;username here&#34;</span> -w<span class="k">)</span>
</span></span></code></pre></div><ul>
<li>Error catching for passwords</li>
</ul>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl"><span class="nv">pw_name</span><span class="o">=</span><span class="s2">&#34;CLI Test&#34;</span>
</span></span><span class="line"><span class="cl"><span class="nv">pw_account</span><span class="o">=</span><span class="s2">&#34;armin&#34;</span>
</span></span><span class="line"><span class="cl"><span class="k">if</span> ! <span class="nv">cli_password</span><span class="o">=</span><span class="k">$(</span>security find-generic-password -w -s <span class="s2">&#34;</span><span class="nv">$pw_name</span><span class="s2">&#34;</span> -a <span class="s2">&#34;</span><span class="nv">$pw_account</span><span class="s2">&#34;</span><span class="k">)</span><span class="p">;</span> <span class="k">then</span>
</span></span><span class="line"><span class="cl">	<span class="nb">echo</span> <span class="s2">&#34;could not get password, error </span><span class="nv">$?</span><span class="s2">&#34;</span>
</span></span><span class="line"><span class="cl">	<span class="nb">exit</span> <span class="m">1</span>
</span></span><span class="line"><span class="cl"><span class="k">fi</span>
</span></span><span class="line"><span class="cl"><span class="nb">echo</span> <span class="s2">&#34;the password is </span><span class="nv">$cli_password</span><span class="s2">&#34;</span>
</span></span></code></pre></div><h2 id="sudo-password-touchid">Sudo Password TouchID</h2>
<ul>
<li>edit <code>/etc/pam.d/sudo</code></li>
<li>add following line to the top</li>
</ul>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl">auth       sufficient     pam_tid.so
</span></span></code></pre></div>
      <script
        src="https://giscus.app/client.js"
        data-repo="matthewshammond/website"
        data-repo-id="R_kgDOIvbsJA"
        data-category="Comments"
        data-category-id="DIC_kwDOIvbsJM4Ce6wo"
        data-mapping="title"
        data-reactions-enabled="0"
        data-theme="dark_dimmed"
        crossorigin="anonymous"
        async
      ></script>
    </div>
  </div>
</div>

    <script src="/js/code-copy.js"></script>
  </main><footer class="bg-tlgray-100">
  
  <script src='/js/clipboard.min.js'></script>
  <script src='/js/highlight.min.js'></script>
  <script src='/js/highlightjs-line-numbers.min.js'></script>
  <script src='/js/sweetalert2.min.js'></script>
  <script>
    hljs.initHighlightingOnLoad();
    hljs.initLineNumbersOnLoad();
    new ClipboardJS(".url");

    function OnClickURL() {
      Swal.fire({
        icon: "success",
        title: "Copied!",
        text: "Copied the URL and title.",
      });
    }
  </script>
  
  <script>
    function toggleNav() {
      var hamburger = document.getElementById("hamburgerbtn");
      var overlay = document.getElementById("overlay");
      var body = document.body;

      hamburger.addEventListener("click", function () {
        overlay.classList.toggle("open");
        hamburger.classList.toggle("is-open");
        body.classList.toggle("scroll-lock");
      });
    }
    toggleNav();

    document.querySelector(".scroll-top").addEventListener("click", () => {
      document.documentElement.scrollTop = 0;
    });
  </script>
  
  <link
    href="https://fonts.googleapis.com/css2?family=PT+Sans&display=swap"
    rel="stylesheet"
  />
  
  <div
    class="flex items-center justify-between flex-wrap bg-nord-0 p-8 text-nord-6"
  >
    <div class="flex items-center flex-shrink-0 text-xl text-nord-0 mr-6">
      <a href="http://localhost:1313/"
        ><img
          alt="Matt Hammond Inc"
          class="h-16 mr-3"
          src="/img/logos/logo.png"
      /></a>
    </div>
    <div class="w-full block flex-grow lg:flex lg:items-center lg:w-auto">
      <div class="text-lg lg:flex-grow"></div>
      <div class="flex flex-row items-center text-lg">
        <a href="https://keys.openpgp.org/search?q=matt%40matthammond.com">PGP public key fingerprint: CC62 A990 773D 843D 7E27 3E0D 6350 0E3E B057 5884</a>
      </div>
    </div>
    <div
      class="w-full block flex-grow lg:flex lg:items-center lg:w-auto"
      id="mobileMenu"
    >
      <div class="text-lg lg:flex-grow"></div>
      <div class="flex flex-row items-center text-lg">
        
        <a
          href="https://github.com/matthewshammond"
          class="block mt-4 lg:inline-block lg:mt-0 text-gray-300 hover:text-white mr-8"
        >
           <i class='fab fa-github text-2xl'></i> 
        </a>
        
        <a
          href="https://linkedin.com/in/matthewshammond"
          class="block mt-4 lg:inline-block lg:mt-0 text-gray-300 hover:text-white mr-8"
        >
           <i class='fab fa-linkedin text-2xl'></i> 
        </a>
        
        <a
          href="https://discord.gg/kU2wgApBgK"
          class="block mt-4 lg:inline-block lg:mt-0 text-gray-300 hover:text-white mr-8"
        >
           <i class='fab fa-discord text-2xl'></i> 
        </a>
        
      </div>
    </div>
  </div>
  <div class="copy pl-8 py-5 bg-tlgray-700 text-nord-6 text-md">
    &copy; Matt Hammond Inc 2024 All Rights Reserved.
  </div>
</footer>
</body>

</html>
